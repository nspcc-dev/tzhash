#!/bin/bash

tmpfile=$(mktemp /tmp/random-file.XXXXXX)
dd if=/dev/urandom of=$tmpfile bs=$1 count=1

go build ./cmd/tzsum || exit 1

for impl in avx avx2 generic; do
	echo $impl implementation:
	time ./tzsum -name $tmpfile -impl $impl
	echo
done
